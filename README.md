# Тестовое задание для отбора на Летнюю ИТ-школу КРОК по разработке

## Условие задания
Будучи тимлидом команды разработки, вы получили от менеджера проекта задачу повысить скорость разработки. Звучит, как начало плохого анекдота, но, тем не менее, решение вам все же нужно найти. В ходе размышлений и изучений различного внешнего опыта других команд разработки вы решили попробовать инструменты геймификации. То есть применить техники и подходы игрового характера с целью повышения вовлеченности команды в решение задач.

Вами была придумана рейтинговая таблица самых активных контрибьютеров за спринт. Что это значит в теории: по окончании итерации (4 рабочие недели) выгружается список коммитов, сделанных в релизную ветку продукта, и на его основе вычисляются трое самых активных разработчиков, сделавших наибольшее количество коммитов. В зависимости от занятого места, разработчик получает определенное количество внутренней валюты вашей компании, которую он впоследствии может обменять на какие-то товары из внутреннего магазина.

На практике вы видите решение следующим образом: на следующий день после окончания спринта в 00:00 запускается автоматическая процедура, которая забирает файл с данными о коммитах в релизную ветку, сделанных в период спринта, после чего выполняется поиск 3-х самых активных контрибьютеров. Имена найденных разработчиков записываются в файл, который впоследствии отправляется вам на почту.

В рамках практической реализации данной задачи вам необходимо разработать процедуру формирование отчета “Топ-3 контрибьютера”. Данная процедура принимает на вход текстовый файл (commits.txt), содержащий данные о коммитах (построчно). Каждая строка содержит сведения о коммите в релизную ветку в формате: “_<Имя пользователя> <Сокращенный хэш коммита> <Дата и время коммита>_”.
Например: AIvanov 25ec001 2024-04-24T13:56:39.492

К данным предъявляются следующие требования:
- имя пользователя может содержать латинские символы в любом регистре, цифры (но не начинаться с них), а также символ "_";
- сокращенный хэш коммита представляет из себя строку в нижнем регистре, состояющую из 7 символов: букв латинского алфавита, а также цифр;
- дата и время коммита в формате YYYY-MM-ddTHH:mm:ss.

В результате работы процедура формирует новый файл (result.txt), содержащий информацию об именах 3-х самых активных пользователей по одному в каждой строке в порядке убывания места в рейтинге. Пример содержимого файла:
AIvanov
AKalinina
CodeKiller777

Ручной ввод пути к файлу (через консоль, через правку переменной в коде и т.д.) недопустим. Необходимость любых ручных действий с файлами в процессе работы программы будут обнулять решение.

## Автор решения
Степанов Никита Станиславович

## Описание реализации
в файле appsettings.json в графе "DefaultConnection" прописывается адрес до файла со списком коммитов, по умолчанию название commits.txt, располагается рядом с исходными файлами в папке Top_3_croc, в графе "OutputConnection" прописывается место сохранения файла с выходными данными, по умолчанию result.txt рядом с исходными файлами в папке Top_3_croc.

В Employee.cs реализован класс Employee со свойствами Name и Commits. Name хранит имя пользователя, а Commits пары(кортежи) хэша коммита и его времени создания. Так же у класса есть 3 конструктора: 1) без параметров, 2) с полем name 3) с полями name и commits. 
Метод GetTimeLastCommit() позволяет получит время последнего комита у пользователя, необходим для сортировки сотрудников в случае равного количества коммитов. 
Метод GetCountCommit() передает количество коммитов у пользователя.
Метод CompareTo() реализован для возможности сортировки объектов класса внутри коллекций.
Метод AddCommit() добавляет коммит пользователю.
Метод Equals() перегружен для возможности сравнения объектов класса, необходимо для использования List.IndexOf().
Так же реализован класс CommitsComparer для использования его объекта в методе Sort() для сортировки коммитов пользователя по времени.

В ProgramReadFunc.cs реализованы методы GetTime(), GetHash() и GetName() для получения времени, хэша и имени пользователя из прочитанной строки из файла.

В Program.cs находится точка входа Main() в программу. С помощью пакета Microsoft.Extensions.Configuration.Json мы получаем из файла appsettings.json 2 строки с адресами фалов с входными данными и выходными. Это позволяет свободно, в случае необходимости, изменить адреса или имена файлов с данными без перекомпиляции приложения.
Переменная info хранит массив строк из входного файла, список employees хранит сотрудников как объекты Employee. Проходя циклом по каждой строке из info, в случае отсутствия сотрудника в employees он туда добавляется, в случае наличия сотрудника, ему добавляется коммит. После список сотрудников сортируется по убыванию колличества коммитов. Если колличество коммитов у 2+ сотрудников равно, то выше находится сотрудник, который раньше создал последний коммит.
Создаем файл с лучшими сотрудниками.

## Инструкция по сборке и запуску решения
1) Клонируем репозиторий: git clone https://github.com/ne-kit-28/school2024-test-task7.git
2) Либо входной файл размещаем рядом с исходными файлами в папке school2024-test-task7\Top_3_croc, либо указываем путь до файла в файле appsettings.json в поле "DefaultConnection".
3) Переходим в папку с решением: cd school2024-test-task7
4) Собираем решение: dotnet build
5) Переходим в папку с исходными файлами: cd school2024-test-task7
6) Запускаем: dotnet run